<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulaire devis — HodoPlanner</title>
  <link rel="icon" href="images/favicon.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root{
      --accent:#7e8db0;
      --accent-2:#ffd166;
      --text:#0f172a;
      --muted:#5b6476;
      --bg:#f7f9fc;
      --card:#ffffff;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:var(--text)}
    header{background:#fff;border-bottom:1px solid #e9eef6;padding:14px 16px;position:sticky;top:0;z-index:10}
    .wrap{max-width:900px;margin:0 auto;padding:24px 16px 60px}
    h1{margin:0 0 16px}
    .card{background:var(--card);border:1px solid #e9eef6;border-radius:var(--radius);padding:18px;box-shadow:0 14px 30px rgba(15,23,42,.06)}
    label{font-weight:600;font-size:14px;display:block;margin:12px 0 6px}
    input,textarea,select{
      width:100%;padding:10px 12px;border:1px solid #dbe3ee;border-radius:12px;
      background:#f8fafc;font-size:14px;outline:none;color:var(--text)
    }
    textarea{min-height:100px;resize:vertical}
    .btn{
      display:inline-flex;align-items:center;gap:8px;height:44px;
      padding:0 16px;border-radius:12px;font-weight:700;border:0;cursor:pointer
    }
    .btn.primary{background:var(--accent);color:#fff}
    .btn.primary:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:16px}
    .panel{background:#fff;border:1px solid #e9eef6;border-radius:var(--radius);padding:16px;margin-top:20px}
    .pill{display:inline-flex;align-items:center;gap:6px;background:#eef3fb;padding:6px 10px;border-radius:999px;font-size:13px;font-weight:600;color:#2f3e64}
    .est-total{font-size:24px;font-weight:900;margin:4px 0}
    .small{font-size:13px;color:var(--muted)}
    .ok{color:#16a34a;font-weight:700;margin-top:6px}
    .cross{text-decoration:line-through;color:#b91c1c;font-weight:600}
  </style>
</head>
<body>

<header>
  <div class="wrap" style="padding:0 16px">
    <strong>HodoPlanner — Formulaire de devis</strong>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <h1>Demander un devis</h1>
    <p class="small">Remplis ce formulaire pour obtenir une estimation automatique. À la fin, tu pourras m’envoyer tes infos si tu veux aller plus loin.</p>

    <form id="plannerForm">
      <label>Budget maximum vols (€)</label>
      <input type="number" name="flight" min="0" step="10" placeholder="ex. 800" required />

      <label>Budget maximum hébergement (€)</label>
      <input type="number" name="hotel" min="0" step="10" placeholder="ex. 800" required />

      <label>Budget maximum activités (€)</label>
      <input type="number" name="activities" min="0" step="10" placeholder="ex. 500" required />

      <label>Durée du voyage (jours)</label>
      <input type="number" name="days" min="1" step="1" placeholder="ex. 14" required />

      <div class="row">
        <button class="btn primary" type="button" id="btnCalc"><i class="fa-solid fa-calculator"></i> Calculer mon devis</button>
      </div>
    </form>

    <!-- Résultats -->
    <div id="result" class="panel" style="display:none">
      <div class="row" style="justify-content:space-between;width:100%">
        <div>
          <div class="pill"><i class="fa-solid fa-receipt"></i> Estimation de prix public</div>
          <div class="est-total" id="estRange"></div>
          <div class="small" id="estExplain"></div>
        </div>
        <div style="text-align:right">
          <div class="small cross" id="publicCross"></div>
          <div class="ok"><i class="fa-solid fa-gift"></i> Offre lancement : <b>GRATUIT</b> ⭐</div>
          <div class="small">contre un avis après réalisation</div>
        </div>
      </div>

      <hr style="border:none; border-top:1px solid #e9eef6; margin:16px 0">

      <!-- Case conditions -->
      <label class="small" style="display:flex;gap:8px;align-items:flex-start;margin:6px 0 10px">
        <input type="checkbox" id="agreeTC" style="margin-top:4px">
        <span>J’ai lu et j’accepte les <a href="conditions.html" target="_blank">Conditions de service</a>.</span>
      </label>

      <div class="row">
        <button class="btn primary" id="btnSend" disabled><i class="fa-solid fa-paper-plane"></i> Envoyer ma demande</button>
        <span class="small">Tu recevras une proposition précise sous 24h.</span>
      </div>
    </div>
  </div>
</div>

<script>
const form = document.getElementById('plannerForm');
const btnCalc = document.getElementById('btnCalc');
const result = document.getElementById('result');
const estRange = document.getElementById('estRange');
const estExplain = document.getElementById('estExplain');
const publicCross = document.getElementById('publicCross');
const agreeTC = document.getElementById('agreeTC');
const btnSend = document.getElementById('btnSend');

btnCalc.addEventListener('click', () => {
  const flight = parseInt(form.flight.value)||0;
  const hotel = parseInt(form.hotel.value)||0;
  const act = parseInt(form.activities.value)||0;
  const days = parseInt(form.days.value)||1;
  const total = flight+hotel+act;

  // Estimation = 10-15% du total + facteur durée
  let base = total * 0.12;
  if(days>14) base *= 1.2;
  if(days>21) base *= 1.4;

  const min = Math.round(base*0.9);
  const max = Math.round(base*1.1);

  estRange.textContent = `${min}€ – ${max}€`;
  estExplain.textContent = `Basé sur un budget total de ${total}€ pour ${days} jours.`;
  publicCross.textContent = `${min}€ – ${max}€`;

  result.style.display = 'block';
});

// Activer bouton si conditions acceptées
document.addEventListener('change', () => {
  if(agreeTC) btnSend.disabled = !agreeTC.checked;
});

btnSend.addEventListener('click', (e) => {
  e.preventDefault();
  if(!agreeTC.checked){
    alert("Merci d’accepter les conditions avant d’envoyer.");
    return;
  }
  alert("Ton devis a été envoyé ! (simulation — connecte Formspree ensuite)");
});
</script>

</body>
</html>